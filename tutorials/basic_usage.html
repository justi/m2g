

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>Basic Usage &mdash; m2g v1.1.0 documentation</title>
  

  
  
    <link rel="shortcut icon" href="../_static/ocp_favicon.ico"/>
  

  

  
  
    

  

  
  
    <link rel="stylesheet" href="../_static/css/theme.css" type="text/css" />
  

  

  
    <link rel="top" title="m2g v1.1.0 documentation" href="../index.html"/>
        <link rel="next" title="Advanced Usage" href="advanced_usage.html"/>
        <link rel="prev" title="Public Data" href="available_data.html"/> 

  
  <script src="_static/js/modernizr.min.js"></script>

</head>

<body class="wy-body-for-nav" role="document">

  <div class="wy-grid-for-nav">

    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-nav-search">
        

        
          <a href="../index.html" class="icon icon-home"> m2g
        

        
          
          <img src="../_static/ocp_main.png" class="logo" />
        
        </a>

        
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

        
      </div>

      <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
        
          
          
              <p class="caption"><span class="caption-text">Documentation</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../sphinx/introduction.html">Introduction</a></li>
<li class="toctree-l1"><a class="reference internal" href="../sphinx/local_config.html">Single Node Configuration</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../sphinx/local_config.html#basic-package-update-and-install">Basic Package Update and Install</a></li>
<li class="toctree-l2"><a class="reference internal" href="../sphinx/local_config.html#install-and-configure-python-2-7">Install and Configure Python 2.7</a></li>
<li class="toctree-l2"><a class="reference internal" href="../sphinx/local_config.html#basics-for-development">Basics for Development</a></li>
<li class="toctree-l2"><a class="reference internal" href="../sphinx/local_config.html#oracle-java-install">Oracle Java Install</a></li>
<li class="toctree-l2"><a class="reference internal" href="../sphinx/local_config.html#java-setup">Java Setup</a></li>
<li class="toctree-l2"><a class="reference internal" href="../sphinx/local_config.html#camino-and-fsl">Camino and FSL</a></li>
<li class="toctree-l2"><a class="reference internal" href="../sphinx/local_config.html#igraph">igraph</a></li>
<li class="toctree-l2"><a class="reference internal" href="../sphinx/local_config.html#m2g-setup">m2g setup</a></li>
<li class="toctree-l2"><a class="reference internal" href="../sphinx/local_config.html#export-paths-and-setup-environment">Export Paths and Setup Environment</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../sphinx/cloud_computing.html">Cloud Services</a></li>
<li class="toctree-l1"><a class="reference internal" href="../sphinx/contributing.html">Contributing</a></li>
<li class="toctree-l1"><a class="reference internal" href="../sphinx/style.html">Style Guides</a></li>
<li class="toctree-l1"><a class="reference internal" href="../sphinx/faq.html">Frequently Asked Questions (FAQ)</a></li>
<li class="toctree-l1"><a class="reference external" href="https://github.com/openconnectome/m2g/releases/">Release Notes</a></li>
</ul>
<p class="caption"><span class="caption-text">Tutorials</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="input_data.html">Data Formats</a><ul>
<li class="toctree-l2"><a class="reference internal" href="input_data.html#input-data">Input Data</a></li>
<li class="toctree-l2"><a class="reference internal" href="input_data.html#output-data">Output Data</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="available_data.html">Public Data</a></li>
<li class="toctree-l1 current"><a class="current reference internal" href="">Basic Usage</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#m2g-complete-pipeline">m2g Complete Pipeline</a></li>
<li class="toctree-l2"><a class="reference internal" href="#m2g-registration-pipeline">m2g Registration Pipeline</a></li>
<li class="toctree-l2"><a class="reference internal" href="#m2g-diffusion-processing-pipeline">m2g Diffusion Processing Pipeline</a></li>
<li class="toctree-l2"><a class="reference internal" href="#intuition-behind-graph-generation">Intuition Behind Graph Generation</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="advanced_usage.html">Advanced Usage</a><ul>
<li class="toctree-l2"><a class="reference internal" href="advanced_usage.html#dti-preprocessing">DTI Preprocessing</a></li>
<li class="toctree-l2"><a class="reference internal" href="advanced_usage.html#registration">Registration</a></li>
<li class="toctree-l2"><a class="reference internal" href="advanced_usage.html#diffusion-processing">Diffusion Processing</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="validation.html">Validation</a></li>
</ul>
<p class="caption"><span class="caption-text">Further Reading</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../api/modules.html">Modules</a></li>
<li class="toctree-l1"><a class="reference internal" href="../api/functions.html">Function Reference</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../api/bet.html">FSL Brain Extraction Tool</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../api/bet.html#pseudocode">Pseudocode</a></li>
<li class="toctree-l3"><a class="reference internal" href="../api/bet.html#references">References</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../api/flirt.html">FSL Linear Registration</a></li>
<li class="toctree-l2"><a class="reference internal" href="../api/parse_b.html">Parse B-values/vectors</a></li>
<li class="toctree-l2"><a class="reference internal" href="../api/extract_b0.html">Extract B0 Volume</a></li>
<li class="toctree-l2"><a class="reference internal" href="../api/eddycorrect.html">FSL Eddy Correction</a></li>
<li class="toctree-l2"><a class="reference internal" href="../api/tensor_gen.html">DTI Tensor Estimation</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../api/tensor_gen.html#pseudocode">Pseudocode</a></li>
<li class="toctree-l3"><a class="reference internal" href="../api/tensor_gen.html#references">References</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../api/fiber_gen.html">Fiber Tractography</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../api/fiber_gen.html#pseudocode">Pseudocode</a></li>
<li class="toctree-l3"><a class="reference internal" href="../api/fiber_gen.html#references">References</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../api/fiber_convert.html">Fiber Converter</a></li>
<li class="toctree-l2"><a class="reference internal" href="../api/gengraph.html">Graph Generation</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../api/gengraph.html#pseudocode">Pseudocode</a></li>
<li class="toctree-l3"><a class="reference internal" href="../api/gengraph.html#references">References</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../api/setup.html">Setup</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference external" href="https://gitter.im/openconnectome/m2g">Gitter chatroom</a></li>
<li class="toctree-l1"><a class="reference external" href="https://groups.google.com/forum/#!forum/ocp-support/">Support</a></li>
<li class="toctree-l1"><a class="reference external" href="https://groups.google.com/forum/#!forum/ocp-support/">Mailing List</a></li>
<li class="toctree-l1"><a class="reference external" href="https://github.com/openconnectome/m2g">Github repo</a></li>
<li class="toctree-l1"><a class="reference external" href="https://openconnectome.github.io/m2g/">Project page</a></li>
<li class="toctree-l1"><a class="reference external" href="https://github.com/openconnectome/m2g/graphs/contributors">Contributors</a></li>
</ul>

          
        
      </div>
      &nbsp;
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" role="navigation" aria-label="top navigation">
        <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
        <a href="../index.html">m2g</a>
      </nav>


      
      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="breadcrumbs navigation">
  <ul class="wy-breadcrumbs">
    <li><a href="../index.html">Docs</a> &raquo;</li>
      
    <li>Basic Usage</li>
      <li class="wy-breadcrumbs-aside">
        
          
            <a href="../_sources/tutorials/basic_usage.txt" rel="nofollow"> View page source</a>
          
        
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document">
            
  <div class="section" id="basic-usage">
<h1>Basic Usage<a class="headerlink" href="#basic-usage" title="Permalink to this headline">Â¶</a></h1>
<p>m2g is a &#8216;one-click&#8217; pipeline which can estimate brain graphs from diffusion and structural MRI data. Provided here are an overview of the function and usage of the entire m2g pipeline, as well as the two sub-pipelines which make up m2g: the registration and diffusion processing pipelines.</p>
<div class="section" id="m2g-complete-pipeline">
<h2>m2g Complete Pipeline<a class="headerlink" href="#m2g-complete-pipeline" title="Permalink to this headline">Â¶</a></h2>
<div class="figure align-center">
<a class="reference internal image-reference" href="../_images/m2g_loni_overall.png"><img alt="../_images/m2g_loni_overall.png" src="../_images/m2g_loni_overall.png" style="width: 800px;" /></a>
</div>
<dl class="function">
<dt id="docs.scripts.m2g">
<code class="descclassname">docs.scripts.</code><code class="descname">m2g</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#docs.scripts.m2g" title="Permalink to this definition">Â¶</a></dt>
<dd><p>Complete m2g workflow which estimates brain graphs from multimodal MRI images.</p>
<p>Starting with raw image data of both structural and diffusion varieties, diffusion scanner parameters, and an atlas which the subject is being compared to, the m2g workflow estimates a brain graph for a subject. In order to submit inputs to the pipeline, files names must be entered in the form of list files (enumerated ASCII text files with one item per line) and submitted to the workflow. The standard MNI152 atlas is currently distributed with our tools, though a user may use a pediatric atlas or another which is most suitable for their data.</p>
<p><strong>Inputs</strong></p>
<blockquote>
<div><dl class="docutils">
<dt>MPRAGE image: [nifti]</dt>
<dd><ul class="first last simple">
<li>Raw 3D structural image of the subject.</li>
</ul>
</dd>
<dt>DTI image: [nifti]</dt>
<dd><ul class="first last simple">
<li>Raw 4D diffusion image (3D + diffusion directions) of the subject.</li>
</ul>
</dd>
<dt>DTI B vectors: [ASCII]</dt>
<dd><ul class="first last simple">
<li>Orientation vectors of the scanner corresponding to the DTI image.</li>
</ul>
</dd>
<dt>DTI B values: [ASCII]</dt>
<dd><ul class="first last simple">
<li>B value intensities of the scanner corresponding to the DTI image.</li>
</ul>
</dd>
<dt>Atlas image: [nifti] (default = MNI152)</dt>
<dd><ul class="first last simple">
<li>Structural template T1 image to which the atlas labels are aligned.</li>
</ul>
</dd>
<dt>Atlas brain mask: [nifti]</dt>
<dd><ul class="first last simple">
<li>Binary mask of the brain of the atlas image.</li>
</ul>
</dd>
<dt>Atlas labels: [nifti] (default = desikan)</dt>
<dd><ul class="first last simple">
<li>Region labels/parcellations of the atlas image.</li>
</ul>
</dd>
</dl>
</div></blockquote>
<p><strong>Outputs</strong></p>
<blockquote>
<div><dl class="docutils">
<dt>Brain Graph: [mat, graphml]</dt>
<dd><ul class="first last simple">
<li>Graph of structural region connectivity of the subject.</li>
</ul>
</dd>
</dl>
</div></blockquote>
</dd></dl>

<hr/></div>
<div class="section" id="m2g-registration-pipeline">
<h2>m2g Registration Pipeline<a class="headerlink" href="#m2g-registration-pipeline" title="Permalink to this headline">Â¶</a></h2>
<div class="figure align-center">
<a class="reference internal image-reference" href="../_images/m2g_loni_registration.png"><img alt="../_images/m2g_loni_registration.png" src="../_images/m2g_loni_registration.png" style="width: 800px;" /></a>
</div>
<dl class="function">
<dt id="docs.scripts.m2g_registration">
<code class="descclassname">docs.scripts.</code><code class="descname">m2g_registration</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#docs.scripts.m2g_registration" title="Permalink to this definition">Â¶</a></dt>
<dd><p>Registration portion of the m2g workflow which aligns diffusion data to the atlas space.</p>
<p>In the registration workflow, diffusion and structural images are preprocessed (e.g, skull-stripped and denoised), and then registered.  Specifically, DTI volumes undergo eddy current correction and are registered to the B0 reference scan. The B0 scan is then registered to the structural MPRAGE image, and the MPRAGE image is registered to the atlas (e.g., MNI152) space.  Finally, these transforms are combined to create a DTI volume in atlas space so that scans and subjects can be easily compared.</p>
<p><strong>Inputs</strong></p>
<blockquote>
<div><dl class="docutils">
<dt>MPRAGE image: [nifti]</dt>
<dd><ul class="first last simple">
<li>Raw 3D structural image of the subject.</li>
</ul>
</dd>
<dt>DTI image: [nifti]</dt>
<dd><ul class="first last simple">
<li>Raw 4D diffusion image (3D + diffusion directions) of the subject.</li>
</ul>
</dd>
<dt>DTI B values: [ASCII]</dt>
<dd><ul class="first last simple">
<li>B value intensities of the scanner corresponding to the DTI image.</li>
</ul>
</dd>
<dt>Atlas image: [nifti] (default = MNI152)</dt>
<dd><ul class="first last simple">
<li>Structural template T1 image to which the atlas labels are aligned.</li>
</ul>
</dd>
</dl>
</div></blockquote>
<p><strong>Outputs</strong></p>
<blockquote>
<div><dl class="docutils">
<dt>Registered DTI image: [nifti]</dt>
<dd><ul class="first last simple">
<li>DTI image which has been denoised and aligned to the atlas space.</li>
</ul>
</dd>
</dl>
</div></blockquote>
</dd></dl>

<hr/></div>
<div class="section" id="m2g-diffusion-processing-pipeline">
<h2>m2g Diffusion Processing Pipeline<a class="headerlink" href="#m2g-diffusion-processing-pipeline" title="Permalink to this headline">Â¶</a></h2>
<div class="figure align-center">
<a class="reference internal image-reference" href="../_images/m2g_loni_diffusion.png"><img alt="../_images/m2g_loni_diffusion.png" src="../_images/m2g_loni_diffusion.png" style="width: 800px;" /></a>
</div>
<dl class="function">
<dt id="docs.scripts.m2g_diffusion">
<code class="descclassname">docs.scripts.</code><code class="descname">m2g_diffusion</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#docs.scripts.m2g_diffusion" title="Permalink to this definition">Â¶</a></dt>
<dd><p>Diffusion processing portion of the m2g workflow which analyzes diffusion information to estimate brain graphs.</p>
<p>In the diffusion processing workflow, the newly aligned DTI image is processed and then mapped to a set of defined labels. Specifically, tensors are estimated for each voxel, indicating the primary direction of water diffusion at that location in the brain.  It has been shown that this corresponds to the principal direction of travel for major white matter (axonal) connections in the brain.  From the tensors, fiber streamlines (or tracks) are created using deterministic algorithms. The fibers are then mapped to atlas regions defined by the inputted parcellation.</p>
<p><strong>Inputs</strong></p>
<blockquote>
<div><dl class="docutils">
<dt>Registered DTI image: [nifti]</dt>
<dd><ul class="first last simple">
<li>DTI image which has been denoised and aligned to the atlas space.</li>
</ul>
</dd>
<dt>DTI B vectors: [ASCII]</dt>
<dd><ul class="first last simple">
<li>Orientation vectors of the scanner corresponding to the DTI image.</li>
</ul>
</dd>
<dt>DTI B values: [ASCII]</dt>
<dd><ul class="first last simple">
<li>B value intensities of the scanner corresponding to the DTI image.</li>
</ul>
</dd>
<dt>Atlas brain mask: [nitfi]</dt>
<dd><ul class="first last simple">
<li>Binary mask of the brain of the atlas image.</li>
</ul>
</dd>
<dt>Atlas labels: [nifti] (default = desikan)</dt>
<dd><ul class="first last simple">
<li>Region labels/parcellations of the atlas image.</li>
</ul>
</dd>
</dl>
</div></blockquote>
<p><strong>Outputs</strong></p>
<blockquote>
<div><dl class="docutils">
<dt>Brain Graph: [mat, graphml]</dt>
<dd><ul class="first last simple">
<li>Graph of structural region connectivity of the subject.</li>
</ul>
</dd>
</dl>
</div></blockquote>
</dd></dl>

<hr/></div>
<div class="section" id="intuition-behind-graph-generation">
<h2>Intuition Behind Graph Generation<a class="headerlink" href="#intuition-behind-graph-generation" title="Permalink to this headline">Â¶</a></h2>
<p>To generate a graph, we first form an empty graph (A), with rows and columns corresponding to nodes (atlas regions).  For each fiber streamline, we find all connected regions; for each pair of regions (i,j) in the streamline, we increment the A(i,j).  Because these connections are undirected, we also increment A(j,i) - or equivalently store only the upper triangular matrix.</p>
<div class="figure align-center">
<a class="reference internal image-reference" href="../_images/graph_construction.png"><img alt="../_images/graph_construction.png" src="../_images/graph_construction.png" style="width: 800px;" /></a>
</div>
</div>
</div>


          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="advanced_usage.html" class="btn btn-neutral float-right" title="Advanced Usage" accesskey="n">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="available_data.html" class="btn btn-neutral" title="Public Data" accesskey="p"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright 2015, Open Connectome Project.
    </p>
  </div>
  Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/snide/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>.

</footer>

        </div>
      </div>

    </section>

  </div>
  


  

    <script type="text/javascript">
        var DOCUMENTATION_OPTIONS = {
            URL_ROOT:'../',
            VERSION:'v1.1.0',
            COLLAPSE_INDEX:false,
            FILE_SUFFIX:'.html',
            HAS_SOURCE:  true
        };
    </script>
      <script type="text/javascript" src="../_static/jquery.js"></script>
      <script type="text/javascript" src="../_static/underscore.js"></script>
      <script type="text/javascript" src="../_static/doctools.js"></script>

  

  
  
    <script type="text/javascript" src="../_static/js/theme.js"></script>
  

  
  
  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.StickyNav.enable();
      });
  </script>
   

</body>
</html>